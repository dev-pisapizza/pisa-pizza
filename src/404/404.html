<script>
  const notFoundUrl = window.location.href;
  const { basePath, pathAfterBasePath } = extractBasePath(notFoundUrl);

  /*
   * When the App is loaded, `src/app/app.component.ts` uses the `route` query
   * parameter to route to the destination using the angular router.
   */
  const redirectUrl = `${basePath}?route=${pathAfterBasePath}`;
  window.location = redirectUrl;

  function extractBasePath(notFoundUrl) {
    // Match 1: https://pisa-pizza.de/pizzas
    // Group 1: https://pisa-pizza.de
    // Group 3: pizzas
    const pattern = /(.*(pisa-pizza|develop|\.de))\/?(.*)/;

    const [, basePath, , pathAfterBasePath] = pattern.exec(url);

    return { basePath, pathAfterBasePath };
  }
</script>
